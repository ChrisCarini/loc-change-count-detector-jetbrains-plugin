apply from: 'build_standard_jetbrains_plugin_build.gradle'

// Configure CHANGELOG.md - https://github.com/JetBrains/gradle-changelog-plugin
changelog {
    repositoryUrl = "https://github.com/ChrisCarini/loc-change-count-detector-jetbrains-plugin"
}

// Configure "Bundling API Sources" - https://plugins.jetbrains.com/docs/intellij/bundling-plugin-openapi-sources.html#bundling-api-sources-in-gradle-build-script
task createOpenApiSourceJar(type: Jar) {
    // Java sources
    from(sourceSets.main.java) {
        include '**/com/chriscarini/jetbrains/locchangecountdetector/**/*.java'
    }
    destinationDirectory = layout.buildDirectory.dir('libs')
    archiveClassifier = 'src'
}

buildPlugin {
    dependsOn(createOpenApiSourceJar)
    from(createOpenApiSourceJar) { into 'lib/src' }
}